---
layout: post
title:  "CozyHouse"
info: ì‡¼í•‘ëª°[ì§„í–‰ ì¤‘]
tech: "Java, Spring Boot, Spring Data JPA, Spring Security, MySQL"
type: Team project
---

# ğŸ“Œ CozyHouse
"cinema"ì™€ "broadcast"ì˜ ê²°í•©ìœ¼ë¡œ ì˜í™”ë¥¼ ë¸Œë¡œë“œìºìŠ¤íŒ…í•˜ì—¬ ì‚¬ìš©ìì—ê²Œ ìµœì‹  ì˜í™” ì •ë³´ì™€ í¸ë¦¬í•œ ì˜ˆë§¤ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤.


## ğŸ–¥ï¸ í”„ë¡œì íŠ¸ ì†Œê°œ
ìŠ¤í”„ë§ ë¶€íŠ¸ë¥¼ ì´ìš©í•´ ì˜¤ëŠ˜ì˜ ì§‘ ì‚¬ì´íŠ¸ë¥¼ ì°¸ê³ í•˜ì—¬ ë§Œë“  ì‡¼í•‘ëª°ì…ë‹ˆë‹¤.


## ğŸ‘¨â€ğŸ‘©â€ğŸ‘¦ í”„ë¡œì íŠ¸ êµ¬ì„±ì›
- **íŒ€ì¥**: ê¹€ë¯¼ì„ - í”„ë¡ íŠ¸ì—”ë“œ
- **íŒ€ì›1**: ì´ë³‘í›ˆ - ë°±ì—”ë“œ
- **íŒ€ì›2**: ê¹€ì¤€ëª¨ - ë°±ì—”ë“œ


## âš™ï¸ ì‚¬ìš©ëœ ê¸°ìˆ 
Java, Spring Boot, Spring Data JPA, Spring Security, MySQL

<br/>

# ğŸ’¡ ë‹´ë‹¹ ê¸°ëŠ¥

## íšŒì›ê°€ì…
- OAuth2 ë°©ì‹ì„ ì‚¬ìš©í•˜ì—¬ JWTë¥¼ ì´ìš©í•œ íšŒì›ê°€ì… ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.
-  ëª¨ë“  íšŒì›ê°€ì… ë¡œì§ì€ ë°±ì—”ë“œì—ì„œ ì²˜ë¦¬í•©ë‹ˆë‹¤.

## ë¡œê·¸ì¸, ì†Œì…œë¡œê·¸ì¸, ë¡œê·¸ì•„ì›ƒ
- OAuth2 ë°©ì‹ìœ¼ë¡œ ë¡œê·¸ì¸ ë° ì†Œì…œ ë¡œê·¸ì¸ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.
- JWTë¥¼ ì‚¬ìš©í•˜ì—¬ ì¸ì¦ í† í°ì„ ê´€ë¦¬í•˜ê³ , ëª¨ë“  ì¸ì¦ ê´€ë ¨ ë¡œì§ì€ ë°±ì—”ë“œì—ì„œ ì²˜ë¦¬í•©ë‹ˆë‹¤.
- ì—¬ëŸ¬ í•„í„°ë¥¼ ì»¤ìŠ¤í„°ë§ˆì´ì¦ˆí•˜ì—¬ ë¡œê·¸ì¸, ë¡œê·¸ì•„ì›ƒ ë° JWT ê²€ì¦ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.
- ë¦¬í”„ë ˆì‹œ í† í°ì„ ì‚¬ìš©í•˜ì—¬ ì„¸ì…˜ ìœ ì§€ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ì˜€ìœ¼ë©°, ë¦¬í”„ë ˆì‹œ í† í° ë¡œí…Œì´ì…˜ì„ í†µí•´ ë³´ì•ˆì„±ì„ ê°•í™”í•˜ì˜€ìŠµë‹ˆë‹¤.

## ì „ì—­ì˜ˆì™¸ì²˜ë¦¬
- AOPë¥¼ í™œìš©í•´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ë°˜ì— ê±¸ì³ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.

## ê¸€ì“°ê¸°
- íŒŒì¼ ì—…ë¡œë“œë¥¼ ìœ„í•´ MultiparFileì™€ Java NIOë¥¼ ì‚¬ìš©í•˜ì—¬ ì²˜ë¦¬í•©ë‹ˆë‹¤.

<br/>

# ğŸ› ï¸ íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ë‚´ìš©

## ë¬¸ì œ ìƒí™© 
1. ì†Œì…œ ë¡œê·¸ì¸ êµ¬í˜„ ì‹œ, ì¼ë°˜ ë¡œê·¸ì¸ì²˜ëŸ¼ ì—‘ì„¸ìŠ¤ í† í°ê³¼ ë¦¬í”„ë ˆì‹œ í† í°ì„ HTTP ì‘ë‹µ í—¤ë”ë¡œ ë°›ìœ¼ë ¤ í–ˆìŠµë‹ˆë‹¤.
2. ê·¸ëŸ¬ë‚˜ í•˜ì´í¼ë§í¬ë¥¼ í†µí•´ ë¦¬ë‹¤ì´ë ‰ì…˜ë˜ëŠ” ê³¼ì •ì—ì„œ ì‘ë‹µ í—¤ë”ì— ì§ì ‘ ì ‘ê·¼í•  ìˆ˜ ì—†ëŠ” ìƒí™©ì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤.
3. ì´ë¡œ ì¸í•´ JWTFilterëŠ” ìš”ì²­ í—¤ë”ì—ì„œ ë°›ì€ ì—‘ì„¸ìŠ¤ ì¿ í‚¤ë¡œ ì¸ì¦ì„ í•˜ê²Œ ë˜ì—ˆê³ , ì´ë¡œ ì¸í•´ ì¼ê´€ì„±ì´ ë–¨ì–´ì§€ëŠ” ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.

## í•´ê²° ë°©ì•ˆ
1. **ì¿ í‚¤ë¥¼ í†µí•œ í† í° ì „ì†¡**  
   - ì†Œì…œ ë¡œê·¸ì¸ í›„, ì—‘ì„¸ìŠ¤ í† í°ê³¼ ë¦¬í”„ë ˆì‹œ í† í°ì„ ì„œë²„ì—ì„œ ì¿ í‚¤ë¡œ ì„¤ì •í•´ í´ë¼ì´ì–¸íŠ¸ì— ì „ì†¡.  
   - HttpOnly ì†ì„±ì„ ì‚¬ìš©í•˜ì—¬ JavaScriptì—ì„œ ì¿ í‚¤ì— ì ‘ê·¼í•  ìˆ˜ ì—†ë„ë¡ ì„¤ì •í•´ XSS ê³µê²©ì— ëŒ€í•œ ë³´ì•ˆì„ ê°•í™”.

2. **ì—‘ì„¸ìŠ¤ í† í° ìš”ì²­ í—¤ë”ë¡œ ë³€í™˜**  
   - ë¡œê·¸ì¸ ì„±ê³µ í•¸ë“¤ëŸ¬ë¥¼ í†µí•´ JWTë¥¼ ë°œê¸‰í•˜ëŠ” ë°©ì‹ì´ ì¿ í‚¤ì™€ í—¤ë”ë¡œ ë‹¤ë¥´ê¸° ë•Œë¬¸ì—, ì¿ í‚¤ì— ì €ì¥ëœ ì—‘ì„¸ìŠ¤ í† í°ì„ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ìš”ì²­ í—¤ë”ë¡œ ë³€í™˜í•˜ì—¬ ë°±ì—”ë“œì— ìš”ì²­.  
   - ì„œë²„ì—ì„œ ìƒˆë¡œìš´ ì—‘ì„¸ìŠ¤ í† í°ì„ ì‘ë‹µ í—¤ë”ë¡œ ë°›ì•„ì˜¬ ìˆ˜ ìˆë„ë¡ í•˜ì—¬ JWTFilterì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ê³ , ëª¨ë“  ì¸ì¦ ë¡œì§ì„ ìš”ì²­ í—¤ë” ë°©ì‹ìœ¼ë¡œ í†µí•©.  

3. **ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥**  
   - ì„œë²„ì—ì„œ ë°›ì€ ì—‘ì„¸ìŠ¤ í† í°ì€ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥í•´ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì‰½ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •.  
   - ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥ëœ í† í°ì´ XSS ê³µê²©ì— ë…¸ì¶œë˜ì§€ ì•Šë„ë¡ ì½˜í…ì¸  ë³´ì•ˆ ì •ì±…(CSP, Content Security Policy)ì„ ì„¤ì •.  
   
## ê²°ë¡ 
1. ì†Œì…œ ë¡œê·¸ì¸ ê³¼ì •ì—ì„œ í•˜ì´í¼ë§í¬ë¡œ ì¸í•œ ë¦¬ë‹¤ì´ë ‰ì…˜ ë¬¸ì œ ë•Œë¬¸ì—, ì¿ í‚¤ë¥¼ ì‚¬ìš©í•´ í† í°ì„ ì „ì†¡í•˜ëŠ” ë°©ì‹ì„ ì„ íƒí–ˆìŠµë‹ˆë‹¤.
2. ì´í›„, ì—‘ì„¸ìŠ¤ í† í°ì„ ìš”ì²­ í—¤ë”ë¡œ ë³€í™˜í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ì— ì „ë‹¬í•¨ìœ¼ë¡œì¨ ì¼ê´€ì„±ì„ ìœ ì§€í–ˆìŠµë‹ˆë‹¤.
3. ë¡œê·¸ì¸ ì„±ê³µ í•¸ë“¤ëŸ¬ì—ì„œ JWT ë°œê¸‰ ë°©ì‹ì„ í†µí•©í•´ JWTFilterì˜ ì¼ê´€ì„±ì„ í™•ë³´í–ˆìœ¼ë©°, ì´ëŠ” ë³´ì•ˆê³¼ ì‚¬ìš©ì„±ì„ ë™ì‹œì— ê³ ë ¤í•œ í•´ê²°ì±…ìœ¼ë¡œ íš¨ê³¼ì ìœ¼ë¡œ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.

## ëŠë‚€ ì 
1. JWT í† í°ì„ í™œìš©í•˜ì—¬ ì¿ í‚¤ì™€ ìš”ì²­ í—¤ë”ë¥¼ ì¡°í•©í•œ ì¸ì¦ ë°©ì‹ì´ íš¨ê³¼ì ì´ë¼ëŠ” ê²ƒì„ ê¹¨ë‹¬ì•˜ìŠµë‹ˆë‹¤.
2. íŠ¹íˆ HttpOnly ì†ì„±ì˜ ì¤‘ìš”ì„±ì„ í†µí•´ XSS ê³µê²© ë°©ì–´ë¥¼ ê°•í™”í•  ìˆ˜ ìˆìŒì„ ë°°ì› ê³ , CSP(Content Security Policy)ì™€ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ë¡œ í´ë¼ì´ì–¸íŠ¸ ì¸¡ ë³´ì•ˆì„ ë†’ì¼ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
3. ì´ë²ˆ ê²½í—˜ì„ í†µí•´ ì›¹ ë³´ì•ˆì˜ ì¤‘ìš”ì„±ì„ ê¹Šì´ ì´í•´í•˜ê²Œ ë˜ì—ˆê³ , ì•ìœ¼ë¡œ JWTë¥¼ í™œìš©í•´ ì•ˆì „í•˜ê³  íš¨ìœ¨ì ì¸ ì‹œìŠ¤í…œì„ êµ¬ì¶•í•˜ëŠ” ë° ê¸°ì—¬í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤.

<br/>

# í”„ë¡œì íŠ¸ ì„¤ì •

ì´ í”„ë¡œì íŠ¸ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ì„œëŠ” ëª‡ ê°€ì§€ í™˜ê²½ ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤. ì•„ë˜ì˜ ë‹¨ê³„ë¥¼ ë”°ë¼ì£¼ì„¸ìš”.


## 1. ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
1. MySQLì—ì„œ cozy-house ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
2. ì•„ë˜ì˜ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ application.properties íŒŒì¼ì„ ì„¤ì •í•©ë‹ˆë‹¤.

## 2. application.properties ì„¤ì •

src/main/resources/application.properties íŒŒì¼ì„ ë‹¤ìŒê³¼ ê°™ì´ ìƒì„± í›„ ì„¤ì •í•©ë‹ˆë‹¤:

- ### ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ë¦„ ë° í¬íŠ¸
spring.application.name=backend  
server.port=8081  

- ### íŒŒì¼ ì—…ë¡œë“œ ë””ë ‰í† ë¦¬
file.upload-dir=C:\\íŒŒì¼ê²½ë¡œ\\file\\  
spring.servlet.multipart.enabled=true  
spring.servlet.multipart.max-file-size=50MB  
spring.servlet.multipart.max-request-size=50MB  

- ### MySQL ì„¤ì •
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver  
spring.datasource.url=YOUR_URL_HERE  
spring.datasource.username=YOUR_username_HERE  
spring.datasource.password=YOUR_PASSWORD_HERE  

- ### JPA ì„¤ì •
spring.jpa.properties.hibernate.show_sql=true  
spring.jpa.properties.hibernate.format_sql=true  
spring.jpa.hibernate.ddl-auto=update  
spring.jpa.database-platform=org.hibernate.dialect.MySQL8Dialect  
spring.jackson.property-naming-strategy=SNAKE_CASE  
spring.jwt.secret=YOUR_SECRET_KEY_HERE  

- ### ë³´ì•ˆ ë¡œê¹…
logging.level.org.springframework.security=DEBUG  

- ### kakao OAuth2
spring.security.oauth2.client.registration.kakao.client-name=Kakao  
spring.security.oauth2.client.registration.kakao.client-id=YOUR_CLIENT_ID  
spring.security.oauth2.client.registration.kakao.client-secret=YOUR_CLIENT_SECRET  
spring.security.oauth2.client.registration.kakao.redirect-uri=http://localhost:8081/login/oauth2/code/kakao  
spring.security.oauth2.client.registration.kakao.authorization-grant-type=authorization_code  
spring.security.oauth2.client.registration.kakao.scope=account_email, profile_nickname  
spring.security.oauth2.client.registration.kakao.client-authentication-method=client_secret_post  
spring.security.oauth2.client.provider.kakao.authorization-uri=https://kauth.kakao.com/oauth/authorize  
spring.security.oauth2.client.provider.kakao.token-uri=https://kauth.kakao.com/oauth/token  
spring.security.oauth2.client.provider.kakao.user-info-uri=https://kapi.kakao.com/v2/user/me  
spring.security.oauth2.client.provider.kakao.user-name-attribute=id  

- ### Google OAuth2
spring.security.oauth2.client.registration.google.client-name=google  
spring.security.oauth2.client.registration.google.client-id=YOUR_CLIENT_ID  
spring.security.oauth2.client.registration.google.client-secret=YOUR_CLIENT_SECRET  
spring.security.oauth2.client.registration.google.redirect-uri=http://localhost:8081/login/oauth2/code/google  
spring.security.oauth2.client.registration.google.authorization-grant-type=authorization_code  
spring.security.oauth2.client.registration.google.scope=profile,email  

- ### GitHub OAuth2
spring.security.oauth2.client.registration.github.client-name=GitHub  
spring.security.oauth2.client.registration.github.client-id=YOUR_CLIENT_ID  
spring.security.oauth2.client.registration.github.client-secret=YOUR_CLIENT_SECRET  
spring.security.oauth2.client.registration.github.redirect-uri=http://localhost:8081/login/oauth2/code/github  
spring.security.oauth2.client.registration.github.authorization-grant-type=authorization_code  
spring.security.oauth2.client.registration.github.scope=SCOPE_read:user,SCOPE_user:email  
spring.security.oauth2.client.registration.github.client-authentication-method=client_secret_post  
spring.security.oauth2.client.provider.github.authorization-uri=https://github.com/login/oauth/authorize  
spring.security.oauth2.client.provider.github.token-uri=https://github.com/login/oauth/access_token  
spring.security.oauth2.client.provider.github.user-info-uri=https://api.github.com/user  
spring.security.oauth2.client.provider.github.user-name-attribute=id  

- ### Naver OAuth2
spring.security.oauth2.client.registration.naver.client-name=naver  
spring.security.oauth2.client.registration.naver.client-id=YOUR_CLIENT_ID  
spring.security.oauth2.client.registration.naver.client-secret=YOUR_CLIENT_SECRET  
spring.security.oauth2.client.registration.naver.redirect-uri=http://localhost:8081/login/oauth2/code/naver  
spring.security.oauth2.client.registration.naver.authorization-grant-type=authorization_code  
spring.security.oauth2.client.registration.naver.scope=name,email  
spring.security.oauth2.client.provider.naver.authorization-uri=https://nid.naver.com/oauth2.0/authorize  
spring.security.oauth2.client.provider.naver.token-uri=https://nid.naver.com/oauth2.0/token  
spring.security.oauth2.client.provider.naver.user-info-uri=https://openapi.naver.com/v1/nid/me  
spring.security.oauth2.client.provider.naver.user-name-attribute=response  

- ### CoolSMS ì„¤ì •(íšŒì›ê°€ì… ì¸ì¦ì½”ë“œ ë¹„í™œì„±í™”í–ˆìŠµë‹ˆë‹¤.)
coolsms.api.key=YOUR_COOLSMS_API_KEY  
coolsms.api.secret=YOUR_COOLSMS_API_SECRET  
coolsms.from=YOUR_COOLSMS_FROM_NUMBER  

- ### Redis ì„¤ì •
spring.data.redis.host=localhost  
spring.data.redis.port=6379  

## 3. í”„ë¡ íŠ¸ì—”ë“œ ì‹¤í–‰ë°©ë²•
1. í”„ë¡ íŠ¸ì—”ë“œ ë””ë ‰í„°ë¦¬ ì´ë™ 
   - cd frontend  
2. ì˜ì¡´ì„± ì„¤ì¹˜
   - npm install
3. ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì¹˜
   - npm run dev